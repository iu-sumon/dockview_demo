{"ast":null,"code":"import { trackFocus } from '../dom';\nimport { CompositeDisposable } from '../lifecycle';\nimport { WillFocusEvent } from '../api/panelApi';\nexport class BasePanelView extends CompositeDisposable {\n  get element() {\n    return this._element;\n  }\n  get width() {\n    return this._width;\n  }\n  get height() {\n    return this._height;\n  }\n  get params() {\n    var _a;\n    return (_a = this._params) === null || _a === void 0 ? void 0 : _a.params;\n  }\n  constructor(id, component, api) {\n    super();\n    this.id = id;\n    this.component = component;\n    this.api = api;\n    this._height = 0;\n    this._width = 0;\n    this._element = document.createElement('div');\n    this._element.tabIndex = -1;\n    this._element.style.outline = 'none';\n    this._element.style.height = '100%';\n    this._element.style.width = '100%';\n    this._element.style.overflow = 'hidden';\n    const focusTracker = trackFocus(this._element);\n    this.addDisposables(this.api, focusTracker.onDidFocus(() => {\n      this.api._onDidChangeFocus.fire({\n        isFocused: true\n      });\n    }), focusTracker.onDidBlur(() => {\n      this.api._onDidChangeFocus.fire({\n        isFocused: false\n      });\n    }), focusTracker);\n  }\n  focus() {\n    const event = new WillFocusEvent();\n    this.api._onWillFocus.fire(event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    this._element.focus();\n  }\n  layout(width, height) {\n    this._width = width;\n    this._height = height;\n    this.api._onDidDimensionChange.fire({\n      width,\n      height\n    });\n    if (this.part) {\n      if (this._params) {\n        this.part.update(this._params.params);\n      }\n    }\n  }\n  init(parameters) {\n    this._params = parameters;\n    this.part = this.getComponent();\n  }\n  update(event) {\n    var _a, _b;\n    // merge the new parameters with the existing parameters\n    this._params = Object.assign(Object.assign({}, this._params), {\n      params: Object.assign(Object.assign({}, (_a = this._params) === null || _a === void 0 ? void 0 : _a.params), event.params)\n    });\n    /**\n     * delete new keys that have a value of undefined,\n     * allow values of null\n     */\n    for (const key of Object.keys(event.params)) {\n      if (event.params[key] === undefined) {\n        delete this._params.params[key];\n      }\n    }\n    // update the view with the updated props\n    (_b = this.part) === null || _b === void 0 ? void 0 : _b.update({\n      params: this._params.params\n    });\n  }\n  toJSON() {\n    var _a, _b;\n    const params = (_b = (_a = this._params) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {};\n    return {\n      id: this.id,\n      component: this.component,\n      params: Object.keys(params).length > 0 ? params : undefined\n    };\n  }\n  dispose() {\n    var _a;\n    this.api.dispose();\n    (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n    super.dispose();\n  }\n}","map":{"version":3,"names":["trackFocus","CompositeDisposable","WillFocusEvent","BasePanelView","element","_element","width","_width","height","_height","params","_a","_params","constructor","id","component","api","document","createElement","tabIndex","style","outline","overflow","focusTracker","addDisposables","onDidFocus","_onDidChangeFocus","fire","isFocused","onDidBlur","focus","event","_onWillFocus","defaultPrevented","layout","_onDidDimensionChange","part","update","init","parameters","getComponent","_b","Object","assign","key","keys","undefined","toJSON","length","dispose"],"sources":["E:/dockview.demo/node_modules/dockview-core/dist/esm/gridview/basePanelView.js"],"sourcesContent":["import { trackFocus } from '../dom';\nimport { CompositeDisposable } from '../lifecycle';\nimport { WillFocusEvent } from '../api/panelApi';\nexport class BasePanelView extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get params() {\n        var _a;\n        return (_a = this._params) === null || _a === void 0 ? void 0 : _a.params;\n    }\n    constructor(id, component, api) {\n        super();\n        this.id = id;\n        this.component = component;\n        this.api = api;\n        this._height = 0;\n        this._width = 0;\n        this._element = document.createElement('div');\n        this._element.tabIndex = -1;\n        this._element.style.outline = 'none';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n        this._element.style.overflow = 'hidden';\n        const focusTracker = trackFocus(this._element);\n        this.addDisposables(this.api, focusTracker.onDidFocus(() => {\n            this.api._onDidChangeFocus.fire({ isFocused: true });\n        }), focusTracker.onDidBlur(() => {\n            this.api._onDidChangeFocus.fire({ isFocused: false });\n        }), focusTracker);\n    }\n    focus() {\n        const event = new WillFocusEvent();\n        this.api._onWillFocus.fire(event);\n        if (event.defaultPrevented) {\n            return;\n        }\n        this._element.focus();\n    }\n    layout(width, height) {\n        this._width = width;\n        this._height = height;\n        this.api._onDidDimensionChange.fire({ width, height });\n        if (this.part) {\n            if (this._params) {\n                this.part.update(this._params.params);\n            }\n        }\n    }\n    init(parameters) {\n        this._params = parameters;\n        this.part = this.getComponent();\n    }\n    update(event) {\n        var _a, _b;\n        // merge the new parameters with the existing parameters\n        this._params = Object.assign(Object.assign({}, this._params), { params: Object.assign(Object.assign({}, (_a = this._params) === null || _a === void 0 ? void 0 : _a.params), event.params) });\n        /**\n         * delete new keys that have a value of undefined,\n         * allow values of null\n         */\n        for (const key of Object.keys(event.params)) {\n            if (event.params[key] === undefined) {\n                delete this._params.params[key];\n            }\n        }\n        // update the view with the updated props\n        (_b = this.part) === null || _b === void 0 ? void 0 : _b.update({ params: this._params.params });\n    }\n    toJSON() {\n        var _a, _b;\n        const params = (_b = (_a = this._params) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {};\n        return {\n            id: this.id,\n            component: this.component,\n            params: Object.keys(params).length > 0 ? params : undefined,\n        };\n    }\n    dispose() {\n        var _a;\n        this.api.dispose();\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n        super.dispose();\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}