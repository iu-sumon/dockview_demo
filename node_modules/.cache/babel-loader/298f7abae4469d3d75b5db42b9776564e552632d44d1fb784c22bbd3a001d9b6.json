{"ast":null,"code":"import React from 'react';\nimport { createPaneview, PROPERTY_KEYS_PANEVIEW } from 'dockview-core';\nimport { usePortalsLifecycle } from '../react';\nimport { PanePanelSection } from './view';\nfunction extractCoreOptions(props) {\n  const coreOptions = PROPERTY_KEYS_PANEVIEW.reduce((obj, key) => {\n    if (key in props) {\n      obj[key] = props[key];\n    }\n    return obj;\n  }, {});\n  return coreOptions;\n}\nexport const PaneviewReact = React.forwardRef((props, ref) => {\n  const domRef = React.useRef(null);\n  const paneviewRef = React.useRef();\n  const [portals, addPortal] = usePortalsLifecycle();\n  React.useImperativeHandle(ref, () => domRef.current, []);\n  const prevProps = React.useRef({});\n  React.useEffect(() => {\n    const changes = {};\n    PROPERTY_KEYS_PANEVIEW.forEach(propKey => {\n      const key = propKey;\n      const propValue = props[key];\n      if (key in props && propValue !== prevProps.current[key]) {\n        changes[key] = propValue;\n      }\n    });\n    if (paneviewRef.current) {\n      paneviewRef.current.updateOptions(changes);\n    } else {\n      // not yet fully initialized\n    }\n    prevProps.current = props;\n  }, PROPERTY_KEYS_PANEVIEW.map(key => props[key]));\n  React.useEffect(() => {\n    var _a;\n    if (!domRef.current) {\n      return () => {\n        // noop\n      };\n    }\n    const headerComponents = (_a = props.headerComponents) !== null && _a !== void 0 ? _a : {};\n    const frameworkOptions = {\n      createComponent: options => {\n        return new PanePanelSection(options.id, props.components[options.name], {\n          addPortal\n        });\n      },\n      createHeaderComponent: options => {\n        return new PanePanelSection(options.id, headerComponents[options.name], {\n          addPortal\n        });\n      }\n    };\n    const api = createPaneview(domRef.current, Object.assign(Object.assign({}, extractCoreOptions(props)), frameworkOptions));\n    const {\n      clientWidth,\n      clientHeight\n    } = domRef.current;\n    api.layout(clientWidth, clientHeight);\n    if (props.onReady) {\n      props.onReady({\n        api\n      });\n    }\n    paneviewRef.current = api;\n    return () => {\n      paneviewRef.current = undefined;\n      api.dispose();\n    };\n  }, []);\n  React.useEffect(() => {\n    if (!paneviewRef.current) {\n      return;\n    }\n    paneviewRef.current.updateOptions({\n      createComponent: options => {\n        return new PanePanelSection(options.id, props.components[options.name], {\n          addPortal\n        });\n      }\n    });\n  }, [props.components]);\n  React.useEffect(() => {\n    var _a;\n    if (!paneviewRef.current) {\n      return;\n    }\n    const headerComponents = (_a = props.headerComponents) !== null && _a !== void 0 ? _a : {};\n    paneviewRef.current.updateOptions({\n      createHeaderComponent: options => {\n        return new PanePanelSection(options.id, headerComponents[options.name], {\n          addPortal\n        });\n      }\n    });\n  }, [props.headerComponents]);\n  React.useEffect(() => {\n    if (!paneviewRef.current) {\n      return () => {\n        // noop\n      };\n    }\n    const disposable = paneviewRef.current.onDidDrop(event => {\n      if (props.onDidDrop) {\n        props.onDidDrop(event);\n      }\n    });\n    return () => {\n      disposable.dispose();\n    };\n  }, [props.onDidDrop]);\n  return React.createElement(\"div\", {\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    ref: domRef\n  }, portals);\n});\nPaneviewReact.displayName = 'PaneviewComponent';","map":{"version":3,"names":["React","createPaneview","PROPERTY_KEYS_PANEVIEW","usePortalsLifecycle","PanePanelSection","extractCoreOptions","props","coreOptions","reduce","obj","key","PaneviewReact","forwardRef","ref","domRef","useRef","paneviewRef","portals","addPortal","useImperativeHandle","current","prevProps","useEffect","changes","forEach","propKey","propValue","updateOptions","map","_a","headerComponents","frameworkOptions","createComponent","options","id","components","name","createHeaderComponent","api","Object","assign","clientWidth","clientHeight","layout","onReady","undefined","dispose","disposable","onDidDrop","event","createElement","style","height","width","displayName"],"sources":["E:/dockview.demo/node_modules/dockview/dist/esm/paneview/paneview.js"],"sourcesContent":["import React from 'react';\nimport { createPaneview, PROPERTY_KEYS_PANEVIEW, } from 'dockview-core';\nimport { usePortalsLifecycle } from '../react';\nimport { PanePanelSection } from './view';\nfunction extractCoreOptions(props) {\n    const coreOptions = PROPERTY_KEYS_PANEVIEW.reduce((obj, key) => {\n        if (key in props) {\n            obj[key] = props[key];\n        }\n        return obj;\n    }, {});\n    return coreOptions;\n}\nexport const PaneviewReact = React.forwardRef((props, ref) => {\n    const domRef = React.useRef(null);\n    const paneviewRef = React.useRef();\n    const [portals, addPortal] = usePortalsLifecycle();\n    React.useImperativeHandle(ref, () => domRef.current, []);\n    const prevProps = React.useRef({});\n    React.useEffect(() => {\n        const changes = {};\n        PROPERTY_KEYS_PANEVIEW.forEach((propKey) => {\n            const key = propKey;\n            const propValue = props[key];\n            if (key in props && propValue !== prevProps.current[key]) {\n                changes[key] = propValue;\n            }\n        });\n        if (paneviewRef.current) {\n            paneviewRef.current.updateOptions(changes);\n        }\n        else {\n            // not yet fully initialized\n        }\n        prevProps.current = props;\n    }, PROPERTY_KEYS_PANEVIEW.map((key) => props[key]));\n    React.useEffect(() => {\n        var _a;\n        if (!domRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const headerComponents = (_a = props.headerComponents) !== null && _a !== void 0 ? _a : {};\n        const frameworkOptions = {\n            createComponent: (options) => {\n                return new PanePanelSection(options.id, props.components[options.name], { addPortal });\n            },\n            createHeaderComponent: (options) => {\n                return new PanePanelSection(options.id, headerComponents[options.name], { addPortal });\n            },\n        };\n        const api = createPaneview(domRef.current, Object.assign(Object.assign({}, extractCoreOptions(props)), frameworkOptions));\n        const { clientWidth, clientHeight } = domRef.current;\n        api.layout(clientWidth, clientHeight);\n        if (props.onReady) {\n            props.onReady({ api });\n        }\n        paneviewRef.current = api;\n        return () => {\n            paneviewRef.current = undefined;\n            api.dispose();\n        };\n    }, []);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return;\n        }\n        paneviewRef.current.updateOptions({\n            createComponent: (options) => {\n                return new PanePanelSection(options.id, props.components[options.name], { addPortal });\n            },\n        });\n    }, [props.components]);\n    React.useEffect(() => {\n        var _a;\n        if (!paneviewRef.current) {\n            return;\n        }\n        const headerComponents = (_a = props.headerComponents) !== null && _a !== void 0 ? _a : {};\n        paneviewRef.current.updateOptions({\n            createHeaderComponent: (options) => {\n                return new PanePanelSection(options.id, headerComponents[options.name], { addPortal });\n            },\n        });\n    }, [props.headerComponents]);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const disposable = paneviewRef.current.onDidDrop((event) => {\n            if (props.onDidDrop) {\n                props.onDidDrop(event);\n            }\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [props.onDidDrop]);\n    return (React.createElement(\"div\", { style: { height: '100%', width: '100%' }, ref: domRef }, portals));\n});\nPaneviewReact.displayName = 'PaneviewComponent';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}