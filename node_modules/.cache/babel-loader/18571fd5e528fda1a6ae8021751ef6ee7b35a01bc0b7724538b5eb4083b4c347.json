{"ast":null,"code":"import { CompositeDisposable, MutableDisposable } from '../../../lifecycle';\nimport { Emitter } from '../../../events';\nimport { trackFocus } from '../../../dom';\nimport { Droptarget } from '../../../dnd/droptarget';\nimport { getPanelData } from '../../../dnd/dataTransfer';\nexport class ContentContainer extends CompositeDisposable {\n  get element() {\n    return this._element;\n  }\n  constructor(accessor, group) {\n    super();\n    this.accessor = accessor;\n    this.group = group;\n    this.disposable = new MutableDisposable();\n    this._onDidFocus = new Emitter();\n    this.onDidFocus = this._onDidFocus.event;\n    this._onDidBlur = new Emitter();\n    this.onDidBlur = this._onDidBlur.event;\n    this._element = document.createElement('div');\n    this._element.className = 'dv-content-container';\n    this._element.tabIndex = -1;\n    this.addDisposables(this._onDidFocus, this._onDidBlur);\n    const target = group.dropTargetContainer;\n    this.dropTarget = new Droptarget(this.element, {\n      getOverlayOutline: () => {\n        var _a;\n        return ((_a = accessor.options.theme) === null || _a === void 0 ? void 0 : _a.dndPanelOverlay) === 'group' ? this.element.parentElement : null;\n      },\n      className: 'dv-drop-target-content',\n      acceptedTargetZones: ['top', 'bottom', 'left', 'right', 'center'],\n      canDisplayOverlay: (event, position) => {\n        if (this.group.locked === 'no-drop-target' || this.group.locked && position === 'center') {\n          return false;\n        }\n        const data = getPanelData();\n        if (!data && event.shiftKey && this.group.location.type !== 'floating') {\n          return false;\n        }\n        if (data && data.viewId === this.accessor.id) {\n          return true;\n        }\n        return this.group.canDisplayOverlay(event, position, 'content');\n      },\n      getOverrideTarget: target ? () => target.model : undefined\n    });\n    this.addDisposables(this.dropTarget);\n  }\n  show() {\n    this.element.style.display = '';\n  }\n  hide() {\n    this.element.style.display = 'none';\n  }\n  renderPanel(panel, options = {\n    asActive: true\n  }) {\n    const doRender = options.asActive || this.panel && this.group.isPanelActive(this.panel);\n    if (this.panel && this.panel.view.content.element.parentElement === this._element) {\n      /**\n       * If the currently attached panel is mounted directly to the content then remove it\n       */\n      this._element.removeChild(this.panel.view.content.element);\n    }\n    this.panel = panel;\n    let container;\n    switch (panel.api.renderer) {\n      case 'onlyWhenVisible':\n        this.group.renderContainer.detatch(panel);\n        if (this.panel) {\n          if (doRender) {\n            this._element.appendChild(this.panel.view.content.element);\n          }\n        }\n        container = this._element;\n        break;\n      case 'always':\n        if (panel.view.content.element.parentElement === this._element) {\n          this._element.removeChild(panel.view.content.element);\n        }\n        container = this.group.renderContainer.attach({\n          panel,\n          referenceContainer: this\n        });\n        break;\n      default:\n        throw new Error(`dockview: invalid renderer type '${panel.api.renderer}'`);\n    }\n    if (doRender) {\n      const focusTracker = trackFocus(container);\n      const disposable = new CompositeDisposable();\n      disposable.addDisposables(focusTracker, focusTracker.onDidFocus(() => this._onDidFocus.fire()), focusTracker.onDidBlur(() => this._onDidBlur.fire()));\n      this.disposable.value = disposable;\n    }\n  }\n  openPanel(panel) {\n    if (this.panel === panel) {\n      return;\n    }\n    this.renderPanel(panel);\n  }\n  layout(_width, _height) {\n    // noop\n  }\n  closePanel() {\n    var _a;\n    if (this.panel) {\n      if (this.panel.api.renderer === 'onlyWhenVisible') {\n        (_a = this.panel.view.content.element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.panel.view.content.element);\n      }\n    }\n    this.panel = undefined;\n  }\n  dispose() {\n    this.disposable.dispose();\n    super.dispose();\n  }\n}","map":{"version":3,"names":["CompositeDisposable","MutableDisposable","Emitter","trackFocus","Droptarget","getPanelData","ContentContainer","element","_element","constructor","accessor","group","disposable","_onDidFocus","onDidFocus","event","_onDidBlur","onDidBlur","document","createElement","className","tabIndex","addDisposables","target","dropTargetContainer","dropTarget","getOverlayOutline","_a","options","theme","dndPanelOverlay","parentElement","acceptedTargetZones","canDisplayOverlay","position","locked","data","shiftKey","location","type","viewId","id","getOverrideTarget","model","undefined","show","style","display","hide","renderPanel","panel","asActive","doRender","isPanelActive","view","content","removeChild","container","api","renderer","renderContainer","detatch","appendChild","attach","referenceContainer","Error","focusTracker","fire","value","openPanel","layout","_width","_height","closePanel","dispose"],"sources":["E:/dockview.demo/node_modules/dockview-core/dist/esm/dockview/components/panel/content.js"],"sourcesContent":["import { CompositeDisposable, MutableDisposable, } from '../../../lifecycle';\nimport { Emitter } from '../../../events';\nimport { trackFocus } from '../../../dom';\nimport { Droptarget } from '../../../dnd/droptarget';\nimport { getPanelData } from '../../../dnd/dataTransfer';\nexport class ContentContainer extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor(accessor, group) {\n        super();\n        this.accessor = accessor;\n        this.group = group;\n        this.disposable = new MutableDisposable();\n        this._onDidFocus = new Emitter();\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = new Emitter();\n        this.onDidBlur = this._onDidBlur.event;\n        this._element = document.createElement('div');\n        this._element.className = 'dv-content-container';\n        this._element.tabIndex = -1;\n        this.addDisposables(this._onDidFocus, this._onDidBlur);\n        const target = group.dropTargetContainer;\n        this.dropTarget = new Droptarget(this.element, {\n            getOverlayOutline: () => {\n                var _a;\n                return ((_a = accessor.options.theme) === null || _a === void 0 ? void 0 : _a.dndPanelOverlay) === 'group'\n                    ? this.element.parentElement\n                    : null;\n            },\n            className: 'dv-drop-target-content',\n            acceptedTargetZones: ['top', 'bottom', 'left', 'right', 'center'],\n            canDisplayOverlay: (event, position) => {\n                if (this.group.locked === 'no-drop-target' ||\n                    (this.group.locked && position === 'center')) {\n                    return false;\n                }\n                const data = getPanelData();\n                if (!data &&\n                    event.shiftKey &&\n                    this.group.location.type !== 'floating') {\n                    return false;\n                }\n                if (data && data.viewId === this.accessor.id) {\n                    return true;\n                }\n                return this.group.canDisplayOverlay(event, position, 'content');\n            },\n            getOverrideTarget: target ? () => target.model : undefined,\n        });\n        this.addDisposables(this.dropTarget);\n    }\n    show() {\n        this.element.style.display = '';\n    }\n    hide() {\n        this.element.style.display = 'none';\n    }\n    renderPanel(panel, options = { asActive: true }) {\n        const doRender = options.asActive ||\n            (this.panel && this.group.isPanelActive(this.panel));\n        if (this.panel &&\n            this.panel.view.content.element.parentElement === this._element) {\n            /**\n             * If the currently attached panel is mounted directly to the content then remove it\n             */\n            this._element.removeChild(this.panel.view.content.element);\n        }\n        this.panel = panel;\n        let container;\n        switch (panel.api.renderer) {\n            case 'onlyWhenVisible':\n                this.group.renderContainer.detatch(panel);\n                if (this.panel) {\n                    if (doRender) {\n                        this._element.appendChild(this.panel.view.content.element);\n                    }\n                }\n                container = this._element;\n                break;\n            case 'always':\n                if (panel.view.content.element.parentElement === this._element) {\n                    this._element.removeChild(panel.view.content.element);\n                }\n                container = this.group.renderContainer.attach({\n                    panel,\n                    referenceContainer: this,\n                });\n                break;\n            default:\n                throw new Error(`dockview: invalid renderer type '${panel.api.renderer}'`);\n        }\n        if (doRender) {\n            const focusTracker = trackFocus(container);\n            const disposable = new CompositeDisposable();\n            disposable.addDisposables(focusTracker, focusTracker.onDidFocus(() => this._onDidFocus.fire()), focusTracker.onDidBlur(() => this._onDidBlur.fire()));\n            this.disposable.value = disposable;\n        }\n    }\n    openPanel(panel) {\n        if (this.panel === panel) {\n            return;\n        }\n        this.renderPanel(panel);\n    }\n    layout(_width, _height) {\n        // noop\n    }\n    closePanel() {\n        var _a;\n        if (this.panel) {\n            if (this.panel.api.renderer === 'onlyWhenVisible') {\n                (_a = this.panel.view.content.element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.panel.view.content.element);\n            }\n        }\n        this.panel = undefined;\n    }\n    dispose() {\n        this.disposable.dispose();\n        super.dispose();\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}